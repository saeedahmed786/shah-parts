(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1426],{23450:function(e,i,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/orders",function(){return s(81235)}])},63222:function(e,i,s){"use strict";s.d(i,{Z:function(){return Loading_Loading}});var l=s(85893),d=s(25675),n=s.n(d);s(67294);var a={src:"/_next/static/media/loading.5fd12965.gif",height:200,width:200,blurWidth:0,blurHeight:0},Loading_Loading=()=>(0,l.jsx)("div",{className:"flex justify-center items-center",children:(0,l.jsx)("div",{className:"w-[60px]",children:(0,l.jsx)(n(),{src:a,alt:"Spinning Tom Nook Loading Icon",width:100,height:100})})})},80979:function(e,i,s){"use strict";s.d(i,{Z:function(){return Admin_AdminLayout}});var l=s(85893),d=s(80912),n=s(63222),a=s(5789),r=s(55673),t=s(11163),o=s(67294),c=s(41664),u=s.n(c),h=s(55373),v=s(44269),x=s(5005),m=s(78390),j=s(53598),p=s(606),g=s(73771),b=s.n(g),Admin_AdminSidebar=()=>{let e=(0,t.useRouter)();return(0,l.jsx)("div",{className:b().AdminSidebar,children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:b().linkContainer,children:[(0,l.jsx)("div",{className:b().linkWrapper,children:(0,l.jsx)(u(),{href:"/admin/dashboard",children:(0,l.jsxs)("button",{className:"".concat("/admin/dashboard"===e.pathname?b().activeLink:b().inactiveLink),children:[(0,l.jsx)(x.Z,{}),(0,l.jsx)("span",{children:"Dashboard"})]})})}),(0,l.jsx)("div",{className:b().linkWrapper,children:(0,l.jsx)(u(),{href:"/admin/categories",children:(0,l.jsxs)("button",{className:"".concat("/admin/categories"===e.pathname?b().activeLink:b().inactiveLink),children:[(0,l.jsx)(v.Z,{}),(0,l.jsx)("span",{children:"Categories"})]})})}),(0,l.jsx)("div",{className:b().linkWrapper,children:(0,l.jsx)(u(),{href:"/admin/brands",children:(0,l.jsxs)("button",{className:"".concat("/admin/brands"===e.pathname?b().activeLink:b().inactiveLink),children:[(0,l.jsx)(h.Z,{}),(0,l.jsx)("span",{children:"Brands"})]})})}),(0,l.jsx)("div",{className:b().linkWrapper,children:(0,l.jsx)(u(),{href:"/admin/products",children:(0,l.jsxs)("button",{className:"".concat("/admin/products"===e.pathname?b().activeLink:b().inactiveLink),children:[(0,l.jsx)(p.Z,{}),(0,l.jsx)("span",{children:"Products"})]})})}),(0,l.jsx)("div",{className:b().linkWrapper,children:(0,l.jsx)(u(),{href:"/admin/orders",children:(0,l.jsxs)("button",{className:"".concat("/admin/orders"===e.pathname?b().activeLink:b().inactiveLink),children:[(0,l.jsx)(j.Z,{}),(0,l.jsx)("span",{children:"Orders"})]})})})]}),(0,l.jsx)("div",{className:b().logoutWrapper,children:(0,l.jsxs)("a",{href:"/login",onClick:d.kS,className:b().logoutButton,children:[(0,l.jsx)("span",{className:b().logoutText,children:"Logout"}),(0,l.jsx)(m.Z,{})]})})]})})},Admin_AdminLayout=e=>{let i=(0,t.useRouter)(),[s,c]=(0,o.useState)(!0),[u,h]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(0,d.$8)()&&1===(0,d.$8)().role||i.push("/login"),c(!1)},[]),s?(0,l.jsx)(n.Z,{}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"xxl:container mx-auto AdminLayout bg-[#F5F8FB] ".concat(u&&"blackMask"),children:e.sidebar?(0,l.jsxs)(r.Z,{className:"block md:flex mt-0",children:[(0,l.jsx)(a.Z,{xs:24,lg:4,className:"hidden lg:block AdminSidebar",children:(0,l.jsx)(Admin_AdminSidebar,{})}),(0,l.jsx)(a.Z,{xs:24,lg:20,className:"md:bg-[#F5F8FB]",children:(0,l.jsx)("div",{className:"md:p-5",children:(0,l.jsx)("div",{className:"mx-2",children:e.children})})})]}):e.children})})}},81235:function(e,i,s){"use strict";s.r(i);var l=s(85893),d=s(86978),n=s(80979),a=s(65400),r=s.n(a),t=s(64749),o=s(2307),c=s(53740),u=s(5121),h=s(30381),v=s.n(h),x=s(25675),m=s.n(x),j=s(67294),p=s(59152),g=s.n(p);let{Title:b,Text:_}=c.default,{Option:f}=t.default;i.default=()=>{let[e,i]=(0,j.useState)([]),[s,a]=(0,j.useState)(!1),[c,h]=(0,j.useState)(""),[x,p]=(0,j.useState)("6"),getAllOrders=async()=>{a(!0),await u.Z.get("".concat("http://localhost:8000/api","/orders/admin/all-orders"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{a(!1),200===e.status?i(e.data):(0,d.hW)(e.data.errorMessage)}).catch(e=>{a(!1),console.log(e),(0,d.hW)(null==e?void 0:e.message)})};function handleChange(e){h(e)}(0,j.useEffect)(()=>(getAllOrders(),()=>{}),[]);let orderStatusHandler=async e=>{await u.Z.put("".concat("http://localhost:8000/api","/orders/set/status"),{status:c,orderId:e,updateTime:v()().format("DD/MM/YYYY, h:mm:ss a")},{headers:{authorization:"Bearer "+localStorage.getItem("token")}}).then(e=>{200===e.status?(0,d.Ik)(e.data.successMessage):(0,d.hW)(e.data.errorMessage)}).catch(e=>{console.log(e),(0,d.hW)(null==e?void 0:e.message)})},A=[{title:"Order ID",dataIndex:"_id",key:"_id"},{title:"Total Price",dataIndex:"totalPrice",key:"totalPrice",render:(e,i)=>(0,l.jsxs)("span",{children:["$",null==i?void 0:i.totalPrice]})},{title:"Status",dataIndex:"status",key:"status",render:(e,i)=>(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{children:(0,l.jsxs)(t.default,{className:"p-0",defaultValue:null==i?void 0:i.status,onChange:handleChange,children:[(0,l.jsx)(f,{value:"1",children:"Just Placed"}),(0,l.jsx)(f,{value:"2",children:"Confirmed"}),(0,l.jsx)(f,{value:"3",children:"Prepared"}),(0,l.jsx)(f,{value:"4",children:"Delivered"}),(0,l.jsx)(f,{value:"5",children:"Complete"}),(0,l.jsx)(f,{value:"0",children:"Cancelled"})]})}),(0,l.jsx)("div",{children:(0,l.jsx)(r(),{size:"large",className:g().antBtn,onClick:()=>orderStatusHandler(null==i?void 0:i._id),children:"Set"})})]})},{title:"Updated At",dataIndex:"statusUpdateTime",key:"statusUpdateTime"}];return(0,l.jsx)(n.Z,{sidebar:!0,children:(0,l.jsxs)("div",{className:g().orders,children:[(0,l.jsxs)("div",{className:"w-full max-w-[400px]",children:[(0,l.jsx)("h2",{className:"text-[23px]",children:"Filter Orders:"}),(0,l.jsxs)(t.default,{showSearch:!0,style:{width:"100%"},placeholder:"Sort Orders",allowClear:!0,treeDefaultExpandAll:!0,value:x,onChange:e=>p(e),className:"mb-3",children:[(0,l.jsx)(f,{value:"6",children:"All"}),(0,l.jsx)(f,{value:"1",children:"Pending"}),(0,l.jsx)(f,{value:"2",children:"Confirmed"}),(0,l.jsx)(f,{value:"3",children:"Prepared"}),(0,l.jsx)(f,{value:"4",children:"Delivered"}),(0,l.jsx)(f,{value:"5",children:"Completed"}),(0,l.jsx)(f,{value:"0",children:"Cancelled"})]})]}),(0,l.jsx)("div",{className:"table-container border orders p-2 mb-10",children:(0,l.jsx)(o.Z,{columns:A,loading:s,dataSource:"6"!==x&&x?null==e?void 0:e.filter(e=>(null==e?void 0:e.status)===x):e,expandable:{expandedRowRender:e=>{var i,s,d,n,a,r,t,o,c,u,h,v,x,j,p,f,A,N,k,S,y;return(0,l.jsxs)("div",{className:g().orderDetails,children:[(0,l.jsx)("div",{className:g().orderProducts,children:null==e?void 0:null===(i=e.products)||void 0===i?void 0:i.map((e,i)=>(0,l.jsxs)("div",{className:"my-0",children:[(0,l.jsxs)("b",{children:["#",i+1]}),(0,l.jsx)(m(),{src:null==e?void 0:e.Pictures[0],height:64,width:64,alt:"Product"}),(0,l.jsx)("span",{children:null==e?void 0:e.Title}),(0,l.jsxs)("span",{children:["Qty: ",null==e?void 0:e.qtyToShop]}),(0,l.jsxs)("span",{children:["$",parseInt((null==e?void 0:e.Price)*(null==e?void 0:e.qtyToShop))]})]},i))}),(0,l.jsxs)("div",{className:"border p-3 max-w-[300px]",children:[(0,l.jsx)(b,{level:6,children:"Order Details:"}),(0,l.jsxs)("div",{className:"flex justify-between gap-8",children:[(0,l.jsx)("b",{children:"Sub Total:"}),(0,l.jsxs)("b",{children:["$",null==e?void 0:e.subTotal]})]}),(0,l.jsxs)("div",{className:"flex justify-between gap-8 my-2",children:[(0,l.jsx)("b",{children:"Shipping Charges:"}),(0,l.jsxs)("b",{children:["$",null==e?void 0:e.shipping]})]}),(0,l.jsxs)("div",{className:"flex justify-between gap-8",children:[(0,l.jsx)("b",{children:"Order Total:"}),(0,l.jsxs)("b",{children:["$",null==e?void 0:e.totalPrice]})]})]}),(0,l.jsxs)("div",{className:"border p-3",children:[(0,l.jsx)(b,{level:6,children:"Billing Address:"}),(0,l.jsxs)(_,{children:[null==e?void 0:null===(s=e.billingAddress)||void 0===s?void 0:s.address,", ",null==e?void 0:null===(d=e.billingAddress)||void 0===d?void 0:d.city,",",(0,l.jsx)("br",{}),null==e?void 0:null===(n=e.billingAddress)||void 0===n?void 0:n.state,", ",null==e?void 0:null===(a=e.billingAddress)||void 0===a?void 0:a.country,", ",null==e?void 0:null===(r=e.billingAddress)||void 0===r?void 0:r.postalCode,(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),null==e?void 0:null===(t=e.billingAddress)||void 0===t?void 0:t.fullName,(0,l.jsx)("br",{}),(0,l.jsx)("a",{href:"mailto: ".concat(null==e?void 0:null===(o=e.billingAddress)||void 0===o?void 0:o.email),children:null==e?void 0:null===(c=e.billingAddress)||void 0===c?void 0:c.email})," ",(0,l.jsx)("br",{}),(0,l.jsx)("a",{href:"tel: ".concat(null==e?void 0:null===(u=e.billingAddress)||void 0===u?void 0:u.phone),children:null==e?void 0:null===(h=e.billingAddress)||void 0===h?void 0:h.phone})]})]}),(null==e?void 0:e.shippingAddress)&&(0,l.jsxs)("div",{className:"border p-3",children:[(0,l.jsx)(b,{level:6,children:"Shipping Address:"}),(0,l.jsxs)(_,{children:[null==e?void 0:null===(v=e.shippingAddress)||void 0===v?void 0:v.address,", ",null==e?void 0:null===(x=e.shippingAddress)||void 0===x?void 0:x.city,",",(0,l.jsx)("br",{}),null==e?void 0:null===(j=e.shippingAddress)||void 0===j?void 0:j.state,", ",null==e?void 0:null===(p=e.shippingAddress)||void 0===p?void 0:p.country,", ",null==e?void 0:null===(f=e.shippingAddress)||void 0===f?void 0:f.postalCode,(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),null==e?void 0:null===(A=e.shippingAddress)||void 0===A?void 0:A.fullName,(0,l.jsx)("br",{}),(0,l.jsx)("a",{href:"mailto: ".concat(null==e?void 0:null===(N=e.shippingAddress)||void 0===N?void 0:N.email),children:null==e?void 0:null===(k=e.shippingAddress)||void 0===k?void 0:k.email})," ",(0,l.jsx)("br",{}),(0,l.jsx)("a",{href:"tel: ".concat(null==e?void 0:null===(S=e.shippingAddress)||void 0===S?void 0:S.phone),children:null==e?void 0:null===(y=e.shippingAddress)||void 0===y?void 0:y.phone})]})]}),(null==e?void 0:e.notes)&&(0,l.jsxs)("div",{className:"border p-3",children:[(0,l.jsx)(b,{level:6,children:"Order Notes:"}),(0,l.jsx)(_,{children:null==e?void 0:e.notes})]})]})}},rowKey:e=>e._id})})]})})}},73771:function(e){e.exports={AdminSidebar:"AdminSidebar_AdminSidebar__6eFiO",linkContainer:"AdminSidebar_linkContainer__8QIYH",linkWrapper:"AdminSidebar_linkWrapper__4rIoI",activeLink:"AdminSidebar_activeLink__ocl97",inactiveLink:"AdminSidebar_inactiveLink__ZRV86",logoutWrapper:"AdminSidebar_logoutWrapper__loysx",logoutButton:"AdminSidebar_logoutButton__Ih4Gk",logoutText:"AdminSidebar_logoutText__ug7Ml"}},59152:function(e){e.exports={orders:"orders_orders__1XCEH",orderDetails:"orders_orderDetails__8XIE_",orderProducts:"orders_orderProducts__n1fDK",antBtn:"orders_antBtn__PbZ0m"}}},function(e){e.O(0,[4885,8614,9858,1024,4055,4807,9843,1972,2996,1059,2307,3740,9774,2888,179],function(){return e(e.s=23450)}),_N_E=e.O()}]);